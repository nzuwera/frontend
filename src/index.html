<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Websocket Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="css/custom-style.css">
</head>

<body>
<div class="container-fluid">
    <!-- Start Navbar -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary mt-3 mb-3">
        <div class="container-fluid d-flex justify-content-between">
            <a class="navbar-brand" href="#">Websocket</a>
            <div id="tab-navigation-links" class="d-none">
                <div class="collapse navbar-collapse">
                    <div class="nav">
                        <a class="nav-link active" id="tab-wallet" data-bs-toggle="tab" href="#wallet" role="tab"
                           aria-controls="wallet" aria-selected="true">Wallet</a>
                        <a class="nav-link" id="tab-reservation" data-bs-toggle="tab" href="#reservation" role="tab"
                           aria-controls="reservation" aria-selected="false" tabindex="-1">Reservation</a>
                        <a class="nav-link" id="tab-charging" data-bs-toggle="tab" href="#charging" role="tab"
                           aria-controls="charging" aria-selected="false" tabindex="-1">Charging</a>
                    </div>
                </div>
            </div>
            <div id="login-div">
                <form id="login-form">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="username" id="login-username"
                               name="login-username"
                               required>
                        <input type="password" class="form-control" placeholder="password" id="password" name="password"
                               required>
                        <button type="submit" class="btn btn-primary btn-sm px-4" id="login-btn">Login</button>
                    </div>
                </form>
            </div>
            <div id="connect-div" class="d-none">
                <div>
                    <button class="btn btn-sm btn-danger py-2 px-4" id="logout-btn">
                        <i class="bi bi-box-arrow-left"></i>
                        &nbsp;Logout
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- End Navbar -->
    <!-- Start Alert message box -->
    <div id="responseMessage" class="mt-3"></div>
    <!-- End Alert message box -->
    <!-- Start User profile and navs -->
    <div id="content-wrapper" class="row mt-3 d-none">
        <!-- User profile -->
        <div id="user-profile" class="col-xxl-3 col-xl-3 col-lg-3 col-md-3 col-sm-12">
        </div>
        <!-- User tabs -->
        <div id="userTabs" class="col-xxl-9 col-xl-9 col-lg-9 col-md-9 col-sm-12">

            <div class="tab-content">
                <!-- Wallet tab content -->
                <div class="tab-pane fade show active" id="wallet" role="tabpanel" aria-labelledby="tab-wallet">
                    <!-- Row start -->
                    <div class="row gy-3 mb-3">
                        <!-- Wallet account card -->
                        <div id="user-wallet" class="col-xxl-3 col-xl-3 col-lg-3 col-md-12 col-sm-12 py-1 mb3"></div>
                        <!-- Wallet history card -->
                        <div id="wallet-history" class="col-xxl-9 col-xl-9 col-lg-9 col-md-12 col-sm-12 py-1">
                            <div class="card text-muted">
                                <div class="card-header">Wallet transactions</div>
                                <div class="card-body table-responsive">
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th>Type</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Account</th>
                                            <th>Amount</th>
                                            <th>TransactionId</th>
                                        </tr>
                                        </thead>
                                        <tbody id="transactionBody" class="table-group-divider">
                                        <!-- Transactions will be rendered here -->
                                        </tbody>
                                    </table>
                                </div>
                                <div class="card-footer">
                                    <nav>
                                        <ul id="pagination" class="pagination">
                                            <!-- Pagination buttons will be rendered here -->
                                        </ul>
                                    </nav>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- Reservation tab content -->
                <div class="tab-pane" id="reservation" role="tabpanel" aria-labelledby="tab-reservation">
                    <div class="row gy-3 mb-3">
                        <!-- Reservation form card -->
                        <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 py-1 mb3">
                            <div class="card">
                                <div class="card-header">Reservation Form</div>
                                <div class="card-body">
                                    <form id="reservation-form">
                                        <div class="row g-2 mb-2">
                                            <div class="col-md">
                                                <div class="form-floating mb-3">
                                                    <select class="form-select" id="chargeBoxId"
                                                            name="chargeBoxId"
                                                            aria-label="Selecting available charger">
                                                        <option value="A03213807419">A03213807419</option>
                                                    </select>
                                                    <label for="chargeBoxId">Select Charger</label>
                                                </div>
                                            </div>
                                            <div class="col-md">
                                                <div class="form-floating mb-3">
                                                    <select class="form-select" id="connectorId"
                                                            name="connectorId"
                                                            aria-label="Selecting available connector">
                                                        <option value="1">1</option>
                                                    </select>
                                                    <label for="connectorId">Select Connector</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row g-2 mb-2">
                                            <div class="col-md">
                                                <div class="form-floating mb-3">
                                                    <select class="form-select" id="plateNumber"
                                                            name="plateNumber"
                                                            aria-label="Selecting customer vehicle">
                                                        <option value="RAC450K">RAC450K</option>
                                                    </select>
                                                    <label for="plateNumber">Select Vehicle</label>
                                                </div>
                                            </div>
                                            <div class="col-md">
                                                <div class="form-floating mb-3">
                                                    <input type="number" class="form-control"
                                                           name="batteryCapacity" id="batteryCapacity"
                                                           value="40"
                                                           required/>
                                                    <label for="batteryCapacity">Battery Level</label>
                                                </div>
                                            </div>
                                            <div class="col-md">
                                                <div class="form-floating mb-3">
                                                    <input type="text" class="form-control"
                                                           name="reservationDuration" id="reservationDuration"
                                                           value="35"
                                                           required/>
                                                    <label for="reservationDuration">Reservation
                                                        Duration</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2 d-md-block">
                                            <button type="submit" class="btn btn-primary" d="reservation-btn"><i
                                                    class="bi bi-send"></i> Send
                                            </button>
                                            <button type="reset" class="btn btn-danger"
                                                    id="reset-reservation-btn"><i class="bi bi-x-circle"></i>
                                                Cancel
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!-- Count down -->
                        <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 py-1 mb3">
                            <div class="card" id="reservation-countdown-card">
                                <div class="card-header">Reservation info - Count Down</div>
                                <div class="card-body">
                                    <div class="d-flex flex-column">
                                        <div class="countdown" id="countdown">
                                            <span id="days">00</span> :
                                            <span id="hours">00</span> :
                                            <span id="minutes">00</span> :
                                            <span id="seconds">00</span>
                                        </div>
                                        <button class="btn btn-danger d-none" id="cancel-reservation-btn">
                                            <i class="bi bi-x-circle"></i> Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Reservation count down & history card -->
                    <div class="row">
                        <div class="col-12 py-1 mb3">
                            <!-- Reservation history -->
                            <div class="card">
                                <div class="card-header">Reservation history</div>
                                <div class="card-body"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Charging tab content -->
                <div class="tab-pane" id="charging" role="tabpanel" aria-labelledby="tab-charging">
                    <!-- Charging Card -->
                    <div class="row gy-3 mb-3">
                        <div class="col-12 py-1">
                            <div class="card">
                                <div class="card-header">Charging session</div>
                                <div class="card-body gy-5">
                                    <div class="d-flex justify-content-between">
                                        <div class="d-flex flex-column gy-1">
                                            <em class="text-muted">Plug connected</em>
                                            <h3 class="h3">Charging...</h3>
                                        </div>
                                        <div class="d-flex flex-column">
                                            <span><i class="bi bi-ev-station"></i> &nbsp;A03213807419</span>
                                            <span><i class="bi bi-plug-fill"></i> &nbsp;1</span>
                                        </div>
                                    </div>
                                    <div class="progress" role="progressbar"
                                         aria-label="Animated striped example" aria-valuenow="55"
                                         aria-valuemin="0" aria-valuemax="100" style="height: 35px">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated"
                                             style="width: 55%"><span class="badge rounded-pill"
                                                                      style="font-size: 1.5rem"><i
                                                class="bi bi-lightning-charge"></i>&nbsp;55%</span></div>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <h1 class="h1">RWF1,500</h1>
                                        <div class="d-flex flex-column gy-1">
                                            <em class="text-muted">Time to full charge</em>
                                            <p class="text-muted">02:34:34</p>
                                        </div>
                                    </div>
                                    <div class="d-grid gap-3">
                                        <button class="btn btn-primary text-center" type="button">
                                            Start
                                        </button>
                                        <button class="btn btn-danger text-center" type="button">
                                            Stop
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Charging History -->
                    <div class="row">
                        <div class="col-12 py-1">
                            <div class="card text-muted">
                                <div class="card-header">Charging history</div>
                                <div class="card-body table-responsive">
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>TransactionId</th>
                                            <th>ReferenceId</th>
                                            <th>idTag</th>
                                            <th>chargeBoxId</th>
                                            <th>connectorId</th>
                                            <th>Energy</th>
                                            <th>Amount</th>
                                            <th>location</th>
                                            <th>Description</th>
                                        </tr>
                                        </thead>
                                        <tbody id="charging-history-body" class="table-group-divider">
                                        <!-- Transactions will be rendered here -->
                                        </tbody>
                                    </table>
                                </div>
                                <div class="card-footer">
                                    <nav>
                                        <ul id="charging-history-pagination" class="pagination">
                                            <!-- Pagination buttons will be rendered here -->
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End User profile and navs  -->
<!-- Modals-->
<!-- Wallet top-up form - Modal -->
<div class="modal fade" id="wallet-topUp-modal" tabindex="-1" aria-labelledby="walletTopUpModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-body">
                <h1 class="modal-title fs-5 mb-2" id="walletTopUpModalLabel">Top-up</h1>
                <form id="topUp-form">
                    <div class="row mb-3">
                        <div class="col-12">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" name="phoneNumber" id="phoneNumber"
                                       readonly
                                       required/>
                                <label for="phoneNumber">Wallet account</label>
                            </div>
                            <div class="form-floating">
                                <input type="number" class="form-control"
                                       name="amount" id="amount" required/>
                                <label for="amount">Amount</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 d-flex justify-content-between">
                            <button type="submit" class="btn btn-primary" d="topUpBtn">Send</button>
                            <button type="reset" class="btn btn-danger" id="resetTopUpBtn" data-bs-dismiss="modal">
                                Cancel
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- End Wallet top-up form -->
<!-- Modal -->

</div>
<!-- JS -->
<script type="module" src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script type="module" type="text/javascript" src="js/index.js"></script>
</body>
</html>
